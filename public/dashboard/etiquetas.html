<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="../assets/img/iconLogo.ico" type="image/x-icon" />
  <title>Etiquetas - ISee</title>
  <link rel="stylesheet" href="../css/etiquetas.css" />
  <link rel="stylesheet" href="../css/NavBarSemDescricao.css" />
  <link rel="stylesheet" href="../css/efeitoToltipDescricao.css">
  <link rel="stylesheet" href="../css/styleModal.css">
  <script src="../js/atribuirEtiqueta.js"></script>
  
</head>

<body onload="imgUsuario(), exibirQtdTotalEtiquetas()">

  <div class="body_dashboard">


    <div class="sessao_grafico_principal">
      <div class="container_title">
        <h1>Etiquetas</h1>
        <h6 id="bem_vindo">Bom dia</h6>
            <!--Sugestão: Seus caixas apresentam (QtdEtiquetas) de etiquetas mapeadas /ou/
            Seus caixas apresentam uma média de (QtdEtiquetas) mapeadas-->
        <div id="imagem_user" class="notificacoes">
          <img src="../assets/img/alert.svg">
          <img src="../assets/img/user.svg">
        </div>
      </div>

      <div class="container_etiquetas">

<!----EXEMPLO DE UM CARD ETIQUETA--------------------------------------------------------------------->
        <div class="card_etiqueta" onclick="abrirModalEtiqueta(modalEtiquetaEnciclopedia)">
            <iconify-icon icon="fluent:brain-circuit-20-filled" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>Enciclopédia</h2>
            Memória de disco superior a 70%
        </div>
<!----FIM EXEMPLO DE UM CARD ETIQUETA--------------------------------------------------------->    

        <div class="card_etiqueta" onclick="abrirModalEtiqueta(modalEtiquetaAtarefado)">
          <iconify-icon icon="game-icons:processor" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>Atarefado</h2>
            Obteve 10 alertas de uso de CPU nos últimos 30 dias

        </div>
        
        <div class="card_etiqueta" onclick="abrirModalEtiqueta(modalEtiquetaDorminhoco)">
          <iconify-icon icon="icon-park-outline:sleep-one" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>Dorminhoco</h2>
            Passou 24 horas inativo nos últimos 30 dias
        </div>
        
        <div class="card_etiqueta" onclick="abrirModalEtiqueta(modalEtiquetaCaminhador)">
            <iconify-icon icon="ri:walk-fill" style="color: #7d2de2;" width="46"></iconify-icon>
            <h2>Caminhador</h2>
            Obteve 10 alertas sobre RAM nos últimos 30 dias
        </div>
        
        <div class="card_etiqueta">
          <iconify-icon icon="akar-icons:paper" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>nome</h2>
            descricao
        </div>
        
        <div class="card_etiqueta">
          <iconify-icon icon="akar-icons:paper" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>nome</h2>
            descricao
        </div>
        
        <div class="card_etiqueta">
          <iconify-icon icon="akar-icons:paper" style="color: #7d2de2;" width="40"></iconify-icon>
            <h2>nome</h2>
            descricao
        </div>
      </div>
    </div>




    <div class="sessao_help">

     <div id="card_help">
        <h3>Tire suas dúvidas!</h3>
         <img src="../assets/img/ilustracao_duvida2.svg" class="img_duvida">
         <button id="landbotChat" onclick="abrirLandbot()">Tirar Dúvidas</button>
     </div>

    </div>


  </div>



  <!--NavBar-->
  <div class="container_navbar">
    <div class="navbar_bottom">
      <div class="btn_home" onclick="tela_home()">
        <img
          onclick="window.location.href='./homeFuncionario.html'"
          src="../assets/img/home_icon.svg"
        />
        <h2 style="color: #7d2de2" id="effectlist">Home</h2>
      </div>

      <div
        class="btn_etiqueta"
        onclick="window.location.href='../dashboard/etiquetas.html'">
        <img src="../assets/img/etiqueta_icon.svg" />
        <h2 style="color: #7d2de2" id="effectlist">Etiquetas</h2>
      </div>

      <div class="btn_historico" onclick="window.location.href='../dashboard/historico.html'">
        <img src="../assets/img/historico_icon.svg" />
        <h2 style="color: #7d2de2" id="effectlist">Histórico</h2>
      </div>

      <div
        class="btn_dashboard"
        onclick="window.location.href='../dashboard/Dashboard.html'">
        <img src="../assets/img/dashboard_icon.svg" />
        <h2 style="color: #7d2de2" id="effectlist">Dashboard</h2>
      </div>

      <div
        class="btn_alerta"
        onclick="window.location.href='../dashboard/alertas.html'"
      >
        <img src="../assets/img/alertas_icon.png" />
        <h2 style="color: #7d2de2" id="effectlist">Alertas</h2>
      </div>

      <div class="btn_perfil">
        <img
          onclick="window.location.href='../meuPerfil.html'"
          src="../assets/img/userNavbar.svg"
        />
        <h2 style="color: #7d2de2" id="effectlist">Perfil</h2>
      </div>

      <div class="btn_sair">
        <img onclick="sair()" src="../assets/img/sair_icon.png" />
        <h2 style="color: #7d2de2" id="effectlist">Sair</h2>
      </div>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="../js/graficosDashboard.js"></script>
<script src="https://code.iconify.design/3/3.0.0/iconify.min.js"></script>
<script src="https://code.iconify.design/iconify-icon/1.0.0/iconify-icon.min.js"></script>

<!-- LANDBOT CHAT PARA TIRAR AS DUVIDAS -->
<script SameSite="None; Secure" src="https://cdn.landbot.io/landbot-3/landbot-3.0.0.js"></script>
<script>
var divCardHelp = document.getElementById('card_help')
function abrirLandbot() {

  var myLandbot = new Landbot.Container({
    container: '#card_help',
    configUrl: 'https://storage.googleapis.com/landbot.online/v3/H-1394018-AZ649FBK88YMKJQX/index.json',
  });
  divCardHelp.style.backgroundColor = "#7D2DE2"
}

</script>
<!-- LANDBOT CHAT PARA TIRAR AS DUVIDAS -->


<script>

var dataAtual = new Date();
  var hora = dataAtual.getHours();
  var nome = sessionStorage.nomeUsuario;
  var bemVindo = document.getElementById("bem_vindo");
  var frase;

  if (hora >= 6 && hora < 13) {
    frase = `Bom dia`;
  } else if (hora >= 13 && hora < 18) {
    frase = `Boa tarde`;
  } else {
    frase = `Boa noite`;
  }

  bem_vindo.innerHTML = `${frase}<span style="color:#7D2DE2;"> ${nome}</span>, foram mapeadas <span style="color:#7D2DE2;">x</span> etiquetas`
      
    function sair() {
        sessionStorage.clear();
        window.location.href = "../login.html";
    }

    function tela_home() {
    if (sessionStorage.cargoUsuario === "Gerente") {
      window.location = "homeGestor.html";
    } else {
      window.location = "homeFuncionario.html";
    }
  }

  function exibirQtdTotalEtiquetas() {
    fetch(`/usuarios/exibirQtdTotalEtiquetas`, {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((resposta) => {
        // saldoConta
        resposta.json().then((data) => {
          console.log(data);
          qtdEtiqueta = data[0].qtdTotalEtiquetas;
          qtdTotalEtiqueta = qtdEtiqueta;
          bem_vindo.innerHTML = `${frase}<span style="color:#7D2DE2;"> ${nome}</span>, foram mapeadas <span style="color:#7D2DE2;">${qtdTotalEtiqueta}</span> etiquetas`;
        });
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }

  function imgUsuario() {
    var idUsuario = sessionStorage.idUsuario;
    fetch(`/usuarios/imgUsuario/${idUsuario}`, {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((resposta) => {
        resposta.json().then((data) => {
          console.log(data);
          const imagemUser = data[0].imagemPerfilUsuario;


          if (imagemUser == undefined) {
            imagem_user.innerHTML = `
                <img src="../assets/img/alert.svg" />
                <img id="imgUser" src="../assets/img/user.svg">
                `
          } else {
            imagem_user.innerHTML = `
                <img src="../assets/img/alert.svg" />
                <img id="imgUser" src="${data[0].imagemPerfilUsuario}" style="border-radius: 92px; height: 9vh; width: 4.3vw">
                `
          }

        })
      }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        finalizarAguardar();
      });
  }

</script>

<!--AQUI FICA TUDO SOBRE MODAL--------------------------------------------->

<script>
  function abrirModalEtiqueta(nome) {
    nome.style.display = 'block';
  }

  function fecharModalEtiqueta(nome) {
    nome.style.display = 'none';
  }
</script>

<html>

<!-- EXEMPLO DO CARD MODAL DE ETIQUETA--------------->
<div id="modalEtiquetaEnciclopedia" class="modalBody">
  <div class="modalReadPlus">
    <div class="containerReadPlus">
      <div class="modalCheck" onclick="fecharModalEtiqueta(modalEtiquetaEnciclopedia)">
        &times;
      </div>

      <button onclick="buttonBack()" class="modalBack">&times;</button>
    </div>
    <h3>Enciclopédia</h3>

    <span id="corpoModalEtiquetaEnciclopedia" class="corpoModalEtiqueta">


      <p>Caixa 1</p>
      <p>Caixa 3</p>
      <p>Caixa 6</p>

    </span>

    <button class="button8" onclick="">Visualizar Caixas</button>
  </div>
</div>
<!-- FIM EXEMPLO DO CARD MODAL DE ETIQUETA--------------->


<div id="modalEtiquetaAtarefado" class="modalBody">
  <div class="modalReadPlus">
    <div class="containerReadPlus">
      <div class="modalCheck" onclick="fecharModalEtiqueta(modalEtiquetaAtarefado)">
        &times;
      </div>

      <button onclick="buttonBack()" class="modalBack">&times;</button>
    </div>
    <h3>Atarefado</h3>

    <span id="corpoModalEtiquetaEnciclopedia" class="corpoModalEtiqueta">

      <p>Caixa 3</p>
      <p>Caixa 4</p>

    </span>

    <button class="button8" onclick="">Visualizar Caixas</button>
  </div>
</div>



<div id="modalEtiquetaDorminhoco" class="modalBody">
  <div class="modalReadPlus">
    <div class="containerReadPlus">
      <div class="modalCheck" onclick="fecharModalEtiqueta(modalEtiquetaDorminhoco)">
        &times;
      </div>

      <button onclick="buttonBack()" class="modalBack">&times;</button>
    </div>
    <h3>Dorminhoco</h3>

    <span id="corpoModalEtiquetaEnciclopedia" class="corpoModalEtiqueta">

      <p>Caixa 1</p>

    </span>

    <button class="button8" onclick="">Visualizar Caixas</button>
  </div>
</div>



<div id="modalEtiquetaCaminhador" class="modalBody">
  <div class="modalReadPlus">
    <div class="containerReadPlus">
      <div class="modalCheck" onclick="fecharModalEtiqueta(modalEtiquetaCaminhador)">
        &times;
      </div>

      <button onclick="buttonBack()" class="modalBack">&times;</button>
    </div>
    <h3>Caminhador</h3>

    <span id="corpoModalEtiquetaEnciclopedia" class="corpoModalEtiqueta">


      <p>Caixa 1</p>
      <p>Caixa 3</p>
      <p>Caixa 6</p>

    </span>

    <button class="button8" onclick="">Visualizar Caixas</button>
  </div>
</div>

